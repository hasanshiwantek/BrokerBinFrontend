import{r as a,u as w,a as y,j as o,b as c}from"./index-SDeZWYlL.js";import{F as P,a as N,b as v,c as S}from"./index-CbKpetUx.js";import{G as F}from"./iconBase-DNWruYMs.js";const M="_bg_1ts9r_1",E="_loginContainer_1ts9r_23",A="_loginContainer_head_1ts9r_1",L="_loginContainer_form_1ts9r_1",k="_loginContainer_form_fields_1ts9r_1",B="_loginContainer_form_forgotPassword_1ts9r_1",D="_loginContainer_form_eyeSlash_1ts9r_1",G="_loginContainer_form_rememberMe_1ts9r_1",O="_loginContainer_bottom_1ts9r_1",R="_loginContainer_bottom_creatAnAccount_1ts9r_1",T="_loginContainer_bottom_divider_1ts9r_1",q="_loginContainer_bottom_socials_1ts9r_1",H="_forgotPasswordPopup_1ts9r_273",z="_forgotPasswordPopup_body_1ts9r_1",e={bg:M,loginContainer:E,loginContainer_head:A,loginContainer_form:L,loginContainer_form_fields:k,loginContainer_form_forgotPassword:B,loginContainer_form_eyeSlash:D,loginContainer_form_rememberMe:G,loginContainer_bottom:O,loginContainer_bottom_creatAnAccount:R,loginContainer_bottom_divider:T,"loginContainer_bottom_divider-text":"_loginContainer_bottom_divider-text_1ts9r_1",loginContainer_bottom_socials:q,forgotPasswordPopup:H,forgotPasswordPopup_body:z};function I(r){return F({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"},child:[]}]})(r)}const W=()=>{const[r,_]=a.useState(!1),[i,l]=a.useState(""),[d,m]=a.useState(!1),g=w(),p=a.useRef();y();const u=()=>{_(!r)},h=async s=>{"use server";s.preventDefault();const f=new FormData(s.currentTarget),b=Object.fromEntries(f.entries());try{const t=await fetch("https://brokerbinbackend.shiwantek.com/api/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),n=await t.json();if(t.ok){const x=n.data,{access_token:C}=n.data,{id:j}=n.data.user;c.set("token",C,{expires:1,secure:!0}),c.set("user_id",j,{expires:1,secure:!0}),localStorage.setItem("user",JSON.stringify(x)),g("/")}else console.error("Login failed",n),l(n.message||"Login failed, please try again.")}catch(t){console.error("Error during login",t),l("An error occurred, please try again later.")}};return o.jsxs("div",{className:e.bg,children:[o.jsxs("div",{className:e.loginContainer,children:[o.jsxs("span",{className:e.loginContainer_head,children:[o.jsx("h1",{children:"Welcome to Brokercell"}),o.jsx("p",{children:"Please sign in to your account and start B2B"})]}),o.jsxs("form",{className:e.loginContainer_form,onSubmit:h,children:[o.jsxs("span",{className:e.loginContainer_form_fields,children:[o.jsx("label",{htmlFor:"email",children:"Email"}),o.jsx("input",{type:"email",name:"userName",placeholder:"Enter your email",required:!0})]}),o.jsxs("span",{className:e.loginContainer_form_fields,children:[o.jsxs("span",{className:e.loginContainer_form_forgotPassword,children:[o.jsx("label",{htmlFor:"password",children:"Password"}),o.jsx("a",{onClick:()=>m(s=>!s),children:"Forgot password?"})]}),o.jsxs("span",{className:e.loginContainer_form_eyeSlash,children:[o.jsx("input",{type:r?"text":"password",name:"password",placeholder:"Enter your password",required:!0,autoComplete:"true"}),o.jsx("button",{onClick:u,type:"button",className:e.togglePasswordButton,children:r?o.jsx(P,{}):o.jsx(N,{})})]})]}),o.jsxs("span",{className:e.loginContainer_form_rememberMe,children:[o.jsx("input",{type:"checkbox",name:"rememberMe",id:"rememberMe"}),o.jsx("label",{htmlFor:"rememberMe",children:"Remember me"})]}),i&&o.jsx("p",{style:{color:"red"},className:e.error,children:i}),o.jsx("button",{type:"submit",children:"Sign in"})]}),o.jsxs("div",{className:e.loginContainer_bottom,children:[o.jsxs("span",{className:e.loginContainer_bottom_creatAnAccount,children:[o.jsx("p",{children:"New on our platform?"}),o.jsx("a",{href:"/register",children:"Create an account"})]}),o.jsx("div",{className:e.loginContainer_bottom_divider,children:o.jsx("div",{className:e.loginContainer_bottom_divider_text,children:"or"})}),o.jsxs("div",{className:e.loginContainer_bottom_socials,children:[o.jsx("a",{href:"#",children:o.jsx(v,{})}),o.jsx("a",{href:"#",children:o.jsx(S,{})}),o.jsx("a",{href:"#",children:o.jsx(I,{})})]})]})]}),d&&o.jsx("div",{className:e.forgotPasswordPopup,children:o.jsx("div",{className:e.forgotPasswordPopup_body,ref:p,children:o.jsxs("form",{action:"",children:[o.jsx("h1",{children:"enter your mail"}),o.jsx("input",{type:"email",name:"forgotMail",placeholder:"Enter your email",required:!0}),o.jsx("button",{type:"submit",children:"Submit"})]})})})]})};export{W as default};

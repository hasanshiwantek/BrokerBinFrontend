import{u as z,j as e,L as de,c as D,b as W,a as he,r,J as pe,N as b,x as xe}from"./index-SDeZWYlL.js";import{m}from"./MyProfile.module-Cdgpf7Z5.js";import{s as l}from"./BroadCast.module-BcBQXTQ_.js";import{s as ue,m as je,t as me,c as ge}from"./services-DfA8nfXM.js";import{g as I}from"./index-CbKpetUx.js";import fe from"./CompanyDetails-CvBIzSvV.js";import"./iconBase-DNWruYMs.js";import"./index-BgpzSwrX.js";import"./tableData-Dg4l-e4e.js";import"./index-DF4zBA-v.js";import"./index-7mvTAQOW.js";const R="data:image/png;base64,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",ye="/assets/bullhornn-jYg0eob9.png",Ce="_modalOverlay_xlm7e_3",be="_modalContent_xlm7e_27",ve="_closeButton_xlm7e_89",Se="_replyButton_xlm7e_89",Ne="_hrSec_xlm7e_127",we="_downloadLink_xlm7e_137",Ae="_iconMargin_xlm7e_151",c={modalOverlay:Ce,modalContent:be,closeButton:ve,replyButton:Se,hrSec:Ne,downloadLink:we,iconMargin:Ae},ke=({isOpen:h,onRequestClose:g,broadcast:t})=>{const i=z();if(!h||!t)return null;const f=()=>{if(!t){console.error("No broadcast data available.");return}localStorage.setItem("broadcastData",JSON.stringify(t)),i("/ReplyBroad")},v=(d,p)=>{if(d.preventDefault(),!p){alert("No file available for download.");return}const o=document.createElement("a");o.href=p,o.download=p.split("/").pop(),document.body.appendChild(o),o.click(),document.body.removeChild(o)};return e.jsx("div",{className:c.modalOverlay,children:e.jsxs("div",{className:c.modalContent,children:[e.jsx("h2",{children:"Broadcast Summary"}),e.jsx("hr",{className:c.hrSec}),e.jsxs("p",{children:[e.jsx("strong",{children:"From:"})," ",t.user_id.company.name," [",t.user_id.email,"]"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Sent:"})," ",new Date(t.created_at).toLocaleString()]}),t.type&&e.jsxs("p",{children:[e.jsx("strong",{children:"Subject:"})," BrokerBin Multiple-Part Broadcast ",t.type.toUpperCase(),": ",t.mfg]}),t.file&&e.jsxs("p",{children:[e.jsx("strong",{children:"Attachment:"}),e.jsxs("a",{href:"#",onClick:d=>v(d,t.file),className:c.downloadLink,children:[e.jsx(I,{className:c.iconMargin}),t.file]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Mfg:"})," ",t.mfg]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Part / Model:"})," ",t.partModel]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Condition:"})," ",t.cond]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Quantity:"})," ",t.quantity]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," ",t.price]}),t.additional_comments&&e.jsxs("p",{children:[e.jsx("strong",{children:"Additional Comments:"})," ",t.additional_comments]}),e.jsxs("p",{children:[e.jsx("strong",{})," ",t.user_id.firstName," ",t.user_id.lastName]}),e.jsxs("p",{children:[e.jsx("strong",{})," ",t.user_id.company.name]}),e.jsxs("p",{children:[e.jsx("strong",{})," P: ",t.user_id.phoneNumber]}),e.jsxs("p",{children:[e.jsx("strong",{})," ",t.user_id.email]}),e.jsx("hr",{className:c.hrSec}),e.jsx("button",{onClick:g,className:c.closeButton,children:"Close"}),e.jsx(de,{children:e.jsx("button",{className:c.replyButton,onClick:f,children:"Reply"})})]})})},ze=()=>{const h=D(s=>s.broadcastStore.broadCastData),{togglePopUp:g,popupCompanyDetail:t}=D(s=>s.searchProductStore),{pagination:i={}}=h||{},f=W.get("token"),v=W.get("user_id"),d=he(),[p,o]=r.useState(!1),[J,k]=r.useState(!1),[T,P]=r.useState(null),[M,q]=r.useState("all"),[K,x]=r.useState([]),[L,U]=r.useState("all"),[B,Y]=r.useState([]),[E,Q]=r.useState(""),[F,H]=r.useState(""),[S,Z]=r.useState({}),[y,N]=r.useState(!0),[a,X]=r.useState(1);r.useEffect(()=>{console.log("Fetching data for pageNumber:",a),N(!0),d(pe({token:f,pageNumber:a})).then(()=>N(!1)).catch(()=>N(!1))},[d,f,a]);const w=s=>{s!==a&&s>=1&&s<=(i.last_page||1)&&(console.log("Changing to page:",s),X(s))};console.log("Current Page State:",a);const u=h&&h.broadcasts?h.broadcasts.filter(s=>(L==="all"||s.type===L)&&(B.length===0||B.includes(s.buy_in))&&(F===""||s.partModel&&s.partModel.toLowerCase().includes(F.toLowerCase()))):[];console.log("Filtered Broadcasts:",u);const _=[...new Set(u.map(s=>s.user_id.id))];console.log(_.toString());const G=s=>{U(s.target.value)},C=s=>{const{name:n,checked:j}=s.target;Y(V=>j?[...V,n]:V.filter(ie=>ie!==n))},$=s=>{Q(s.target.value)},O=()=>{H(E.trim())},ee=s=>{s.key==="Enter"&&O()},se=s=>{const n=s.target.value;switch(q(n),n){case"computer":x(ge);break;case"telecom":x(me);break;case"mobileDevices":x(je);break;case"services":x(ue);break;default:x([]);break}},te=s=>{Z(n=>({...n,[s.id]:!n[s.id]}))},le=z(),A=()=>{const s=Object.keys(S).filter(j=>S[j]);if(s.length===0){alert("Please select a broadcast to reply to.");return}if(s.length>1){alert("You can only reply to one broadcast at a time.");return}const n=u.find(j=>j.id===parseInt(s[0]));le("/ReplyBroad",{state:{broadcast:n}})},ne=s=>{P(s),k(!0)},ae=()=>{k(!1),P(null)},re=s=>{d(xe([s])),o(!0),console.log("Popup company details:",s,"Toggle State:",p)},oe=()=>{o(!1)},ce=s=>{if(!s){alert("No file available for download.");return}const n=document.createElement("a");n.href=s,n.download=s.split("/").pop(),document.body.appendChild(n),n.click(),document.body.removeChild(n)};return r.useEffect(()=>{console.log("togglePopUp in BroadCast:",g)},[g]),e.jsx(e.Fragment,{children:e.jsxs("main",{className:l.mainSec,children:[e.jsx("nav",{className:"menu-bar",children:e.jsx("div",{className:m.profileInfo_links,children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx("button",{onClick:A,style:{color:"black"},children:"Reply"})}),e.jsx("li",{children:e.jsx(b,{to:"/sendbroad",className:({isActive:s})=>s?m.active:"",children:e.jsx("span",{children:"Send"})})}),e.jsx("li",{children:e.jsx(b,{to:"/broadcasts",className:({isActive:s})=>s?m.active:"",children:e.jsx("span",{children:"View"})})}),e.jsx("li",{children:e.jsx(b,{to:"/myprofile/broadcastfilter",className:({isActive:s})=>s?m.active:"",children:e.jsx("span",{children:"Set Filters"})})}),e.jsx("li",{children:e.jsx(b,{to:"/broadcasthistory",className:({isActive:s})=>s?m.active:"",children:e.jsx("span",{children:"History"})})})]})})}),e.jsx("div",{className:l.headerSec,children:e.jsx("div",{className:l.tableWrapper,children:e.jsxs("div",{className:l.tableHeader,children:[e.jsxs("div",{className:l.manufacturerDropdown,children:[e.jsx("span",{children:" View By:Â "}),e.jsx("select",{children:e.jsx("option",{value:"all",children:"Manufacturer"})})]}),e.jsx("div",{className:l.manufacturerDropdown,children:e.jsxs("select",{value:M,onChange:se,children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"computer",children:"Computers"}),e.jsx("option",{value:"telecom",children:"Telecom"}),e.jsx("option",{value:"services",children:"Services"}),e.jsx("option",{value:"mobileDevices",children:"Mobile Devices"})]})}),e.jsx("div",{children:e.jsxs("select",{children:[M==="all"?e.jsx("option",{value:"",children:"- -Choose one"}):e.jsx("option",{value:"",children:"Sub Category"}),K.map(s=>e.jsx("option",{value:s.value,children:s.label},s.id))]})}),e.jsx("div",{className:l.manufacturerDropdown,children:e.jsxs("select",{onChange:G,children:[e.jsx("option",{value:"all",children:"Type"}),e.jsx("option",{value:"wts",children:"WTS"}),e.jsx("option",{value:"wtb",children:"WTB"}),e.jsx("option",{value:"rfq",children:"RFQ"})]})}),e.jsx("div",{className:l.manufacturerDropdown,children:e.jsx("select",{children:e.jsx("option",{value:"all",children:"Region"})})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bulk",children:"Bulk"}),e.jsx("input",{type:"checkbox",name:"bulk",id:"bulk",onChange:C})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"wholeUnit",children:"Whole Unit"}),e.jsx("input",{type:"checkbox",name:"wholeUnit",id:"wholeUnit",onChange:C})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"container",children:"Container"}),e.jsx("input",{type:"checkbox",name:"container",id:"container",onChange:C})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pallet",children:"Pallet"}),e.jsx("input",{type:"checkbox",name:"pallet",id:"pallet",onChange:C})]}),e.jsxs("div",{className:l.searchBroadcastSec,children:[e.jsx("input",{type:"text",placeholder:"Search Broadcasts",value:E,onChange:$,onKeyDown:ee}),e.jsx("button",{onClick:O,children:"Search"})]})]})})}),e.jsxs("table",{className:l.table,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Cart"}),e.jsx("th",{children:"Posted"}),e.jsxs("th",{children:[e.jsx("img",{src:R,alt:"",srcset:"",style:{width:"18px",fontWeight:"bold"}})," "]}),e.jsx("th",{children:"Company"}),e.jsx("th",{children:"Ctry"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"View"}),e.jsx("th",{children:"Part / Model"}),e.jsx("th",{children:"HECI/CLEI"}),e.jsx("th",{children:"Mfg"}),e.jsx("th",{children:"Cond"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Qty "}),e.jsx("th",{children:"Product Description"})]})}),e.jsx("tbody",{children:y?e.jsx("tr",{children:e.jsx("td",{colSpan:"14",style:{textAlign:"center"},children:"Loading broadcasts..."})}):u.length>0?u.map((s,n)=>s&&s.id?e.jsxs("tr",{style:s.user_id&&String(s.user_id.id)===v?{color:"red"}:null,children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:!!S[s.id],onChange:()=>te(s)})}),e.jsx("td",{children:s.created_at}),e.jsx("td",{}),e.jsx("td",{children:e.jsx("span",{onClick:()=>re(s.user_id.company),children:s.user_id.company.name})}),e.jsx("td",{children:s.user_id.company.country}),e.jsx("td",{className:s.type==="wtb"?l["type-wtb"]:s.type==="wts"?l["type-wts"]:s.type==="rfq"?l["type-rfq"]:"",children:s.type}),e.jsxs("td",{className:"flex",children:[e.jsx("img",{src:ye,alt:"",onClick:()=>ne(s),style:{width:"18px",fontWeight:"bold"}}),s.file&&e.jsxs("div",{className:l.tooltipWrapper,children:[e.jsx(I,{onClick:()=>ce(s.file),style:{cursor:"pointer",marginLeft:"8px"},className:l.fileIcon}),e.jsx("span",{className:l.tooltip,children:"Download File"})]})]}),e.jsx("td",{style:{textTransform:"uppercase"},children:s.partModel}),e.jsx("td",{children:s.heciClei}),e.jsx("td",{children:s.mfg}),e.jsx("td",{children:s.cond}),e.jsx("td",{style:{color:"blue"},children:s.price}),e.jsx("td",{children:s.quantity}),e.jsx("td",{children:s.description})]},n):null):e.jsx("tr",{children:e.jsx("td",{colSpan:"14",style:{textAlign:"center"},children:"No broadcasts found for the selected type."})})}),e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Cart"}),e.jsx("th",{children:"Posted"}),e.jsxs("th",{children:[e.jsx("img",{src:R,alt:"",srcset:"",style:{width:"18px",fontWeight:"bold"}})," "]}),e.jsx("th",{children:"Company"}),e.jsx("th",{children:"Ctry"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"View"}),e.jsx("th",{children:"Part / Model"}),e.jsx("th",{children:"HECI/CLEI"}),e.jsx("th",{children:"Mfg"}),e.jsx("th",{children:"Cond"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Qty "}),e.jsx("th",{children:"Product Description"})]})})]}),e.jsxs("div",{className:l.pagination,children:[e.jsx("button",{onClick:()=>w(a-1),disabled:a===1||y,children:"Previous"}),[...Array(i.last_page||1).keys()].map(s=>s+1).filter(s=>a===1?s<=3:a===i.last_page?s>=i.last_page-2:s>=a-1&&s<=a+1).map(s=>e.jsx("button",{onClick:()=>w(s),className:`${l.pageButton} ${a===s?l.active:""}`,disabled:y,children:s},s)),e.jsx("button",{onClick:()=>w(a+1),disabled:a===i.last_page||y,children:"Next"})]}),e.jsx("div",{className:l.replyBtnSec,children:e.jsx("button",{className:l.replyBtn,onClick:A,children:"Reply"})}),p&&t.length>0&&e.jsx(fe,{closeModal:oe}),e.jsx(ke,{isOpen:J,onRequestClose:ae,broadcast:T,handleReply:A})]})})};export{ze as default};

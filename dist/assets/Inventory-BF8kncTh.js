import{c as v,a as f,j as e,a5 as u,r as j,b as S,a6 as A}from"./index-SDeZWYlL.js";import{c as n}from"./Inventory.module-DIToDVM4.js";import{f as m,g as b}from"./index-CJjz7ulA.js";import{I as N}from"./InventoryButtons-ClxUomOt.js";import{E as k}from"./ErrorStatus-B4XXr6ws.js";import"./iconBase-DNWruYMs.js";const U=()=>{const o=v(s=>s.inventoryStore.addAnotherFiles),r=f(),c=(s,l)=>{const i=s.target.files[0],t=["xlsx","csv","xls"];if(i)if(t.includes(i.name.split(".").pop().toLowerCase())){const d=new FileReader;d.onload=y=>{const _=y.target.result.replace("data:","").replace(/^.+,/,""),F=o.map((x,g)=>l===g?{...x,file:{base64:_,name:i.name,size:i.size,type:i.type},stockOption:x.stockOption||""}:x);r(u(F))},d.readAsDataURL(i)}else s.target.value="",alert("Format should be only .xlsx or .csv");else alert("No file selected.")},p=(s,l)=>{const i=o.map((t,d)=>l===d?{...t,status:s.target.value}:t);r(u(i))},h=()=>{const s=[...o,{file:null,status:"Stock"}];r(u(s))},a=s=>{const l=o.filter((i,t)=>t!==s);r(u(l))};return e.jsxs("div",{className:n.AddAnotherFile,children:[e.jsxs("div",{className:n.AddAnotherFile_Btn,children:[e.jsx("p",{children:"add another file"}),e.jsx("button",{type:"button",onClick:h,children:e.jsx(m,{})})]}),e.jsx("div",{className:n.AddAnotherFile_uploads,children:o.map((s,l)=>e.jsxs("div",{className:n.AddAnotherFile_uploads_div,children:[e.jsx("label",{children:"Excel or CSV*"}),e.jsx("input",{type:"file",onChange:i=>c(i,l)}),e.jsxs("select",{value:s.status,onChange:i=>p(i,l),children:[e.jsx("option",{value:"error",children:"Select a Status"}),e.jsx("option",{value:"NA",children:"Auto Detect"}),e.jsx("option",{value:"Stock",children:"Stock"}),e.jsx("option",{value:"Avail",children:"Distribution"})]}),l!==0&&e.jsx("button",{type:"button",onClick:()=>a(l),children:e.jsx(b,{})})]},l))})]})},C=()=>{const[o,r]=j.useState(!1),[c,p]=j.useState(!0),h=a=>{a.preventDefault();const s=new FormData(a.target),l=Object.fromEntries(s.entries());l.useSSHKey=l.useSSHKey==="on"?1:0,console.log(l)};return e.jsxs("div",{children:[e.jsxs("div",{className:n.inventory_main_scheduleUpload_toggle,children:[e.jsx("p",{children:"Schedule New Upload"}),e.jsx("button",{type:"button",onClick:()=>r(a=>!a),children:o?e.jsx(b,{}):e.jsx(m,{})})]}),o&&e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:n.inventory_main_scheduleUpload,children:[e.jsxs("span",{children:[e.jsx("label",{children:"Time (CDT / CST)"}),e.jsx("input",{type:"time",name:"scheduleTime",id:"scheduleTime"})]}),e.jsxs("span",{children:[e.jsx("label",{children:"status"}),e.jsxs("select",{name:"status",children:[e.jsx("option",{value:"stock",children:"stock"}),e.jsx("option",{value:"distribution",children:"distribution"})]})]}),e.jsxs("span",{children:[e.jsx("label",{children:"uploader"}),e.jsx("input",{type:"text",name:"uploader"})]})]}),e.jsx("div",{className:n.inventory_main_scheduleUpload_addFile,children:c?e.jsxs("div",{className:n.inventory_main_scheduleUpload_addFile_btn,children:[e.jsx("label",{children:"add a file"}),e.jsx("button",{type:"button",onClick:()=>p(a=>!a),children:e.jsx(m,{})})]}):e.jsxs("div",{className:n.inventory_main_scheduleUpload_addFile_toggle,children:[e.jsx("h1",{children:"Add a File"}),e.jsxs("div",{className:n.inventory_main_scheduleUpload_addFile_toggle_fields,children:[e.jsxs("span",{children:[e.jsx("label",{children:"protocol"}),e.jsxs("select",{name:"protocol",children:[e.jsx("option",{value:"ftp",children:"ftp"}),e.jsx("option",{value:"http",children:"http"}),e.jsx("option",{value:"https",children:"https"}),e.jsx("option",{value:"sftp",children:"sftp"})]})]}),e.jsxs("span",{children:[e.jsx("label",{children:"URL"}),e.jsx("input",{type:"text",name:"url",placeholder:"host.domain/file.csv"})]}),e.jsxs("span",{children:[e.jsx("label",{children:"port"}),e.jsx("input",{type:"text",name:"port"})]}),e.jsxs("span",{children:[e.jsx("label",{children:"Use SSH Key"}),e.jsx("input",{type:"checkbox",name:"useSSHKey"})]}),e.jsxs("span",{children:[e.jsx("label",{children:"Login"}),e.jsx("input",{type:"text",name:"login"})]}),e.jsxs("span",{children:[e.jsx("label",{children:"Password"}),e.jsx("input",{type:"password",name:"password"})]})]}),e.jsxs("div",{className:n.inventory_main_scheduleUpload_addFile_toggle_btn,children:[e.jsx("button",{type:"button",children:e.jsx("input",{type:"submit",value:"Add"})}),e.jsx("button",{type:"button",onClick:()=>p(a=>!a),children:"cancel"})]})]})}),e.jsx("button",{type:"button",className:n.inventory_main_scheduleUpload_footer,children:"create"})]})})]})},H=()=>{const o=S.get("token"),{addAnotherFiles:r,error:c}=v(a=>a.inventoryStore),p=f(),h=a=>{a.preventDefault();const s=new FormData,l=Object.fromEntries(new FormData(a.target).entries());for(const[t,d]of Object.entries(l))s.append(t,d);const i=r.filter(t=>t.file);if(i.length>0){i.forEach((t,d)=>{t.file&&(s.append("uploadFile[]",new Blob([atob(t.file.base64)],{type:t.file.type}),t.file.name),s.append(`status[${d}]`,t.status||"NA"))});for(let t of s.entries())console.log(t[0],t[1]);p(A({token:o,formData:s}))}else alert("Please fill all required fields")};return c?e.jsx(k,{error:c}):e.jsxs("div",{className:n.inventory,children:[e.jsx(N,{}),e.jsxs("div",{className:n.inventory_main,children:[e.jsxs("form",{onSubmit:h,children:[e.jsx("h1",{children:"upload inventory"}),e.jsx(U,{}),e.jsxs("p",{className:n.inventory_main_desc,children:["or",e.jsx("span",{children:e.jsx("a",{href:"mailto:kaif.rizvi@shiwantek.com",children:e.jsx("u",{children:e.jsx("i",{children:" email parts list"})})})})]}),e.jsxs("div",{className:n.inventory_main_ExampleFile,children:[e.jsx("p",{children:"Example Files"}),e.jsxs("div",{children:[e.jsx("a",{target:"_blank",href:"https://members.brokerbin.com/help/example.xls",children:e.jsx("u",{children:"example.xls"})}),e.jsx("a",{target:"_blank",href:"https://members.brokerbin.com/help/example.csv",children:e.jsx("u",{children:"example.csv"})})]})]}),e.jsx("button",{type:"submit",value:"send file",oncClick:h,className:n.inventory_main_submitBtn}),e.jsx("h1",{className:n.inventory_main_AutoUploadh1,children:"Auto Uploads"})]}),e.jsx(C,{}),e.jsxs("div",{className:n.inventory_main_footer,children:[e.jsx("h1",{children:"Current Uploads"}),e.jsx("p",{children:"No Auto Uploads are currently scheduled for your company"})]})]})]})};export{H as default};

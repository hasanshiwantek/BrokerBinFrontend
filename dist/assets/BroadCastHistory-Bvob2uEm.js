import{c as P,b as f,a as E,r as c,J as S,j as e,N as o,L as H,K as W}from"./index-SDeZWYlL.js";import{m as r}from"./MyProfile.module-Cdgpf7Z5.js";const M="_container_amms0_1",q="_tabs_amms0_23",F="_activeTab_amms0_75",Q="_tableWrapper_amms0_87",V="_table_amms0_87",K="_tableHeader_amms0_119",R="_broadcastButton_amms0_167",Y="_deleteButton_amms0_169",A="_previewButton_amms0_171",J="_tabTitle_amms0_173",U="_subTitle_amms0_199",z="_manufacturerDropdown_amms0_211",G="_actionButtons_amms0_233",O="_footer_amms0_247",X="_p_amms0_171",Z="_partSearchSec_amms0_291",$="_searchBroadcastSec_amms0_309",s={container:M,tabs:q,activeTab:F,tableWrapper:Q,table:V,tableHeader:K,broadcastButton:R,deleteButton:Y,previewButton:A,tabTitle:J,subTitle:U,manufacturerDropdown:z,actionButtons:G,footer:O,p:X,partSearchSec:Z,searchBroadcastSec:$,"type-wtb":"_type-wtb_amms0_337","type-wts":"_type-wts_amms0_347","type-rfq":"_type-rfq_amms0_359"},se=()=>{var b;const y=P(t=>t.broadcastStore.broadCastData),B=f.get("user_id"),n=E(),[d,C]=c.useState("all"),[p,v]=c.useState(""),[m,T]=c.useState(""),[i,u]=c.useState([]),[g,h]=c.useState(!0),l=f.get("token");c.useEffect(()=>{h(!0),n(S({token:l})).then(()=>h(!1)).catch(()=>h(!1))},[n,l]);const x=(b=y.broadcasts)==null?void 0:b.filter(t=>t.user_id.id.toString()===B.toString()),j=x==null?void 0:x.filter(t=>d==="all"||t.type===d.toLowerCase()).filter(t=>{var a;return m===""||((a=t.partModel)==null?void 0:a.toLowerCase().includes(m.toLowerCase()))}),w=t=>{C(t.target.value)},N=t=>{v(t.target.value)},_=()=>{T(p.trim())},D=t=>{t.key==="Enter"&&_()},k=t=>{u(a=>a.includes(t)?a.filter(I=>I!==t):[...a,t])},L=()=>{i.length>0?(n(W({token:l,ids:i})).then(()=>{n(S({token:l}))}),u([]),alert("Broadcast Deleted")):alert("Select Broadcast for Deletion")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:s.container,children:[e.jsx("div",{className:r.profileInfo_links,children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(o,{to:"/sendbroad",end:!0,className:({isActive:t})=>t?r.active:"",children:e.jsx("span",{children:"Send"})})}),e.jsx("li",{children:e.jsx(o,{to:"/broadcasts",className:({isActive:t})=>t?r.active:"",children:e.jsx("span",{children:"View"})})}),e.jsx("li",{children:e.jsx(o,{to:"/myprofile/broadcastfilter",className:({isActive:t})=>t?r.active:"",children:e.jsx("span",{children:"Set Filters"})})}),e.jsx("li",{children:e.jsx(o,{to:"/broadcasthistory",className:({isActive:t})=>t?r.active:"",children:e.jsx("span",{children:"History"})})})]})}),e.jsxs("div",{className:s.tableWrapper,children:[e.jsxs("div",{className:s.tableHeader,children:[e.jsx("div",{children:e.jsx(H,{className:s.tabTitle,to:"/broadcasts",children:"BroadCast"})}),e.jsxs("div",{className:s.manufacturerDropdown,children:[e.jsx("span",{children:" View:Â "}),e.jsxs("select",{onChange:w,value:d,children:[e.jsx("option",{value:"all",children:"All Broadcasts"}),e.jsx("option",{value:"WTB",children:"WTB"}),e.jsx("option",{value:"WTS",children:"WTS"}),e.jsx("option",{value:"RFQ",children:"RFQ"})]})]}),e.jsxs("div",{className:s.searchBroadcastSec,children:[e.jsx("input",{type:"text",placeholder:"Search Broadcasts",value:p,onChange:N,onKeyDown:D}),e.jsx("button",{onClick:_,children:"Search"})]})]}),e.jsxs("table",{className:s.table,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Cart"}),e.jsx("th",{children:"Last Posted"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"View"}),e.jsx("th",{children:"Part / Model"}),e.jsx("th",{children:"HECI / CLEI"}),e.jsx("th",{children:"Mfg"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"QTY"}),e.jsx("th",{children:"Product Description"})]})}),e.jsx("tbody",{children:g?e.jsx("tr",{children:e.jsx("strong",{colSpan:"9",children:"Loading broadcasts..."})}):j&&j.length>0?j.map((t,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:i.includes(t.id),onChange:()=>k(t.id)})}),e.jsx("td",{children:t.created_at}),e.jsx("td",{className:t.type==="wtb"?s["type-wtb"]:t.type==="wts"?s["type-wts"]:t.type==="rfq"?s["type-rfq"]:"",children:t.type}),e.jsx("td",{children:"---"}),e.jsx("td",{children:t.partModel}),e.jsx("td",{children:t.heciClei}),e.jsx("td",{children:t.mfg}),e.jsx("td",{style:{color:"blue"},children:t.price}),e.jsx("td",{children:t.quantity}),e.jsx("td",{children:t.description})]},a)):e.jsx("tr",{children:e.jsx("p",{colSpan:"9",children:"No broadcasts found."})})}),e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Cart"}),e.jsx("th",{children:"Last Posted"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"View"}),e.jsx("th",{children:"Part / Model"}),e.jsx("th",{children:"HECI / CLEI"}),e.jsx("th",{children:"Mfg"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"QTY"}),e.jsx("th",{children:"Product Description"})]})})]}),e.jsx("div",{className:s.actionButtons,children:e.jsx("button",{className:s.deleteButton,onClick:L,children:"Delete"})})]})]})})};export{se as default};

import{b as v,c as U,a as Y,r as _,h as O,j as e,i as V,N as x,A as R,B as j,C as W,D as q}from"./index-SDeZWYlL.js";import{m as n}from"./MyProfile.module-Cdgpf7Z5.js";import{p as z}from"./shadow-C4GOdKcJ.js";import{E as Z}from"./ErrorStatus-B4XXr6ws.js";const Q=()=>{var P,F;const g=v.get("token"),I=v.get("user_id"),{user:f,formData:s,initialData:u,blurWhileLoading:y,customSignature:t,error:C}=U(a=>a.profileStore),k=((P=f==null?void 0:f.user)==null?void 0:P.id)||I,c=Y(),[N,b]=_.useState(""),S=[s.sigcheckName?`${s.firstName} ${s.lastName}`:"",s.sigcheckEmailAddress?`${s.email}`:"",s.sigcheckPosition?`${s.position}`:"",s.sigcheckPhone?`${s.phoneNumber}`:"",s.sigcheckCell?`${s.cellular}`:"",s.sigcheckCompany?`${s.experience}`:"",s.sigcheckToll?`${s.tollFree}`:"",s.sigcheckFax?`${s.faxNumber}`:"",s.sigcheckIM?`${s.specialty}`:""].filter(Boolean).join(`
`),E=(F=u==null?void 0:u.customSignature)==null?void 0:F.filter(Boolean).join(`
`);_.useEffect(()=>{c(O({id:k,token:g}))},[c,k,g]);const A=a=>a.trimStart().replace(/\s+/g," "),l=a=>{const{name:o,type:i,checked:h,value:m}=a.target,d=i==="checkbox"?h:A(m);c(j({...s,[o]:d}))},M=a=>{const o=a.target.files[0],i=String(o.name).split(".").pop().toLowerCase();if(["jpeg","jpg","png","webp"].includes(i))if(o){const m=new FileReader;m.onload=d=>{const w=d.target.result.replace("data:","").replace(/^.+,/,"");b(w)},m.readAsDataURL(o)}else b("");else alert("Format should be a jpeg, jpg, png, or webp"),a.target.value="",b("")},T=async a=>{a.preventDefault(),c(W(!1));const o=new FormData(a.target),i=Object.fromEntries(Object.entries(Object.fromEntries(o.entries())).map(([r,p])=>(r==="signature"||r==="customSignature"?p=p.split(`
`).filter(Boolean).map(D=>D.replace(/\s+/g," ").trim()):typeof p=="string"&&(p=p.replace(/\s+/g," ").trim()),[r,p])));t&&delete i.signature,i.useCustomSignature=i.useCustomSignature?1:0,N?i.personalPhoto={base64:N}:delete i.personalPhoto;const h=["currentPassword","newPassword","confirmNewPassword"],d=h.map(r=>i[r]||"").filter(r=>r!=="");if(d.length>0&&d.length<h.length){alert("Please fill in all password fields to update your password, or leave all empty if no update is intended.");return}if(d.length===h.length&&i.newPassword!==i.confirmNewPassword){alert("New passwords do not match.");return}h.forEach(r=>{i[r]===""&&delete i[r]});const w=i.firstName,B=/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)[A-Za-z\d!@#$%^&*()_+]{8,24}$/;if(i.newPassword&&!B.test(i.newPassword)){alert("Password does not meet the complexity requirements.");return}if(i.newPassword&&i.newPassword.toLowerCase().includes(w.toLowerCase())){alert("Password cannot contain the username.");return}Object.keys(i).forEach(r=>{i[r]===u[r]&&delete i[r]}),console.log(i),c(j(i)),c(q({id:k,token:g,data:i}))},L=()=>{c(j({sigcheckName:!0,sigcheckEmailAddress:!0,sigcheckPosition:!0,sigcheckPhone:!0,sigcheckCell:!0,sigcheckCompany:!0,sigcheckToll:!0,sigcheckFax:!0,sigcheckIM:!0}))},$=()=>{c(j({sigcheckName:!1,sigcheckEmailAddress:!1,sigcheckPosition:!1,sigcheckPhone:!1,sigcheckCell:!1,sigcheckCompany:!1,sigcheckToll:!1,sigcheckFax:!1,sigcheckIM:!1}))};return C?e.jsx(e.Fragment,{children:e.jsx(Z,{error:C})}):e.jsxs(e.Fragment,{children:[!y&&e.jsx(V,{}),y&&e.jsx("div",{className:n.profileLayout,children:e.jsxs("form",{onSubmit:T,children:[e.jsxs("div",{className:n.profileBtn,children:[e.jsx("p",{children:"my profile"}),e.jsxs("span",{children:[e.jsx("input",{type:"submit",value:"submit changes"}),e.jsx("button",{type:"button",children:"view profile"})]})]}),e.jsxs("div",{className:n.profileInfo,children:[e.jsx("div",{className:n.profileInfo_links,children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(x,{to:"/myprofile",end:!0,className:({isActive:a})=>a?n.active:"",children:e.jsx("span",{children:"Personal Info"})})}),e.jsx("li",{children:e.jsx(x,{to:"/myprofile/Options",className:({isActive:a})=>a?n.active:"",children:e.jsx("span",{children:"Options"})})}),e.jsx("li",{children:e.jsx(x,{to:"/myprofile/MyVendors",className:({isActive:a})=>a?n.active:"",children:e.jsx("span",{children:"My Vendors"})})}),e.jsx("li",{children:e.jsx(x,{to:"/myprofile/MyContact",className:({isActive:a})=>a?n.active:"",children:e.jsx("span",{children:"My Contacts"})})}),e.jsx("li",{children:e.jsx(x,{to:"/myprofile/broadcastfilter",className:({isActive:a})=>a?n.active:"",children:e.jsx("span",{children:"Broadcast Filters"})})})]})}),e.jsxs("div",{className:n.profileInfo_form,children:[e.jsx("div",{className:n.profileInfo_form_personalInfo,children:e.jsxs("div",{children:[e.jsxs("span",{children:[e.jsx("label",{htmlFor:"firstName",children:"First Name"}),e.jsx("input",{type:"text",name:"firstName",id:"firstName",onChange:l,value:s.firstName,placeholder:"Your first name"})]}),e.jsxs("span",{children:[e.jsx("label",{htmlFor:"lastName",children:"Last Name"}),e.jsx("input",{type:"text",name:"lastName",id:"lastName",onChange:l,value:s.lastName,placeholder:"Your last name"})]}),e.jsxs("span",{children:[e.jsx("label",{htmlFor:"position",children:"Position"}),e.jsx("input",{type:"text",name:"position",id:"position",onChange:l,value:s.position,placeholder:"Your position"})]}),e.jsxs("span",{children:[e.jsx("label",{htmlFor:"experience",children:"Experience"}),e.jsx("input",{type:"text",name:"experience",id:"experience",onChange:l,value:s.experience,placeholder:"Your experience"})]}),e.jsxs("span",{children:[e.jsx("label",{htmlFor:"specialty",children:"Specialty (if any)"}),e.jsx("input",{type:"text",name:"specialty",id:"specialty",onChange:l,value:s.specialty,placeholder:"Your specialty"})]}),e.jsxs("span",{children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{type:"text",name:"email",id:"email",onChange:l,value:s.email,placeholder:"Your email"})]})]})}),e.jsxs("div",{className:n.profileInfo_form_personalPhoto,children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Personal Photo"}),e.jsx("div",{children:e.jsx("img",{src:s!=null&&s.profileImage?s.profileImage:z,alt:"personal photo"})})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",name:"personalPhoto",id:"personalPhoto",onChange:M}),e.jsx("button",{type:"submit",children:"Submit Changes"})]})]}),e.jsxs("div",{className:n.profileInfo_form_IMScreenNames,children:[e.jsx("h1",{children:"IM Screen Names"}),e.jsxs("div",{children:[e.jsxs("span",{children:[e.jsx("label",{htmlFor:"skype",children:"Skype"}),e.jsx("input",{type:"text",name:"skype",id:"skype",onChange:l,value:s.skype,placeholder:"Enter Skype username"})]}),e.jsxs("span",{children:[e.jsx("label",{htmlFor:"whatsapp",children:"WhatsApp"}),e.jsx("input",{type:"text",name:"whatsapp",id:"whatsapp",onChange:l,value:s.whatsapp,placeholder:"Enter WhatsApp number"})]}),e.jsxs("span",{children:[e.jsx("label",{htmlFor:"trillian",children:"Trillian"}),e.jsx("input",{type:"text",name:"trillian",id:"trillian",onChange:l,value:s.trillian,placeholder:"Enter Trillian ID"})]})]})]}),e.jsxs("div",{className:n.profileInfo_form_socialNetworking,children:[e.jsx("h1",{children:"Social Networking"}),e.jsxs("div",{children:[e.jsxs("span",{children:[e.jsx("label",{htmlFor:"facebook",children:"Facebook"}),e.jsx("input",{type:"text",name:"facebook",id:"facebook",onChange:l,value:s.facebook,placeholder:"Facebook link"})]}),e.jsxs("span",{children:[e.jsx("label",{htmlFor:"twitter",children:"Twitter"}),e.jsx("input",{type:"text",name:"twitter",id:"twitter",onChange:l,value:s.twitter,placeholder:"Twitter handle"})]}),e.jsxs("span",{children:[e.jsx("label",{htmlFor:"linkedin",children:"LinkedIn"}),e.jsx("input",{type:"text",name:"linkedin",id:"linkedin",onChange:l,value:s.linkedin,placeholder:"LinkedIn profile"})]})]})]}),e.jsxs("div",{className:n.profileInfo_form_phone,children:[e.jsx("h1",{children:"Phone"}),e.jsxs("div",{children:[e.jsxs("span",{children:[e.jsx("label",{htmlFor:"phoneNumber",children:"Direct Number"}),e.jsx("input",{type:"text",name:"phoneNumber",id:"phoneNumber",onChange:l,value:s.phoneNumber,placeholder:"Enter direct number"})]}),e.jsxs("span",{children:[e.jsx("label",{htmlFor:"tollFree",children:"Toll Free"}),e.jsx("input",{type:"text",name:"tollFree",id:"tollFree",onChange:l,value:s.tollFree,placeholder:"Enter toll-free number"})]}),e.jsxs("span",{children:[e.jsx("label",{htmlFor:"cellular",children:"Cellular"}),e.jsx("input",{type:"text",name:"cellular",id:"cellular",onChange:l,value:s.cellular,placeholder:"Enter cellular number"})]}),e.jsxs("span",{children:[e.jsx("label",{htmlFor:"fax",children:"Fax"}),e.jsx("input",{type:"text",name:"faxNumber",id:"faxNumber",onChange:l,value:s.faxNumber,placeholder:"Enter fax number"})]})]})]}),e.jsxs("div",{className:n.profileInfo_form_signature,children:[e.jsx("h1",{children:"signature"}),e.jsx("div",{className:n.profileInfo_form_signature_group,children:e.jsxs("ul",{className:n.profileInfo_form_signature_checkbox,children:[e.jsxs("div",{children:[e.jsxs("li",{children:[e.jsx("label",{htmlFor:"sigcheckName",children:"Name"}),e.jsx("input",{type:"checkbox",name:"sigcheckName",id:"sigcheckName",checked:s.sigcheckName,onChange:l,disabled:t})]}),e.jsxs("li",{children:[e.jsx("label",{htmlFor:"sigcheckPosition",children:"Position"}),e.jsx("input",{type:"checkbox",name:"sigcheckPosition",id:"sigcheckPosition",checked:s.sigcheckPosition,onChange:l,disabled:t})]}),e.jsxs("li",{children:[e.jsx("label",{htmlFor:"sigcheckPhone",children:"Phone"}),e.jsx("input",{type:"checkbox",name:"sigcheckPhone",id:"sigcheckPhone",checked:s.sigcheckPhone,onChange:l,disabled:t})]})]}),e.jsxs("div",{children:[e.jsxs("li",{children:[e.jsx("label",{htmlFor:"sigcheckCell",children:"Cell"}),e.jsx("input",{type:"checkbox",id:"sigcheckCell",name:"sigcheckCell",checked:s.sigcheckCell,onChange:l,disabled:t})]}),e.jsxs("li",{children:[e.jsx("label",{htmlFor:"sigcheckEmailAddress",children:"Email"}),e.jsx("input",{type:"checkbox",id:"sigcheckEmailAddress",name:"sigcheckEmailAddress",checked:s.sigcheckEmailAddress,onChange:l,disabled:t})]}),e.jsxs("li",{children:[e.jsx("label",{htmlFor:"sigcheckCompany",children:"Company"}),e.jsx("input",{type:"checkbox",id:"sigcheckCompany",name:"sigcheckCompany",checked:s.sigcheckCompany,onChange:l,disabled:t})]})]}),e.jsxs("div",{children:[e.jsxs("li",{children:[e.jsx("label",{htmlFor:"sigcheckToll",children:"Toll"}),e.jsx("input",{type:"checkbox",id:"sigcheckToll",name:"sigcheckToll",checked:s.sigcheckToll,onChange:l,disabled:t})]}),e.jsxs("li",{children:[e.jsx("label",{htmlFor:"sigcheckFax",children:"Fax"}),e.jsx("input",{type:"checkbox",id:"sigcheckFax",name:"sigcheckFax",checked:s.sigcheckFax,onChange:l,disabled:t})]}),e.jsxs("li",{children:[e.jsx("label",{htmlFor:"sigcheckIM",children:"IM"}),e.jsx("input",{type:"checkbox",id:"sigcheckIM",name:"sigcheckIM",checked:s.sigcheckIM,onChange:l,disabled:t})]})]})]})}),e.jsxs("div",{className:n.profileInfo_form_signature_checkbox_checkUncheck,children:[e.jsx("button",{type:"button",onClick:L,children:"check all"}),e.jsx("button",{type:"button",onClick:$,children:"uncheck all"})]}),e.jsx("p",{children:"Uncheck Use Custom Signature to use the checkboxes above."})]}),e.jsxs("div",{className:n.profileInfo_form_customSignature,children:[e.jsx("h1",{children:"Custom Signature"}),e.jsxs("div",{children:[e.jsxs("span",{children:[e.jsx("label",{htmlFor:"CustomSignature",children:"Use Custom Signature"}),e.jsx("input",{type:"checkbox",name:"useCustomSignature",id:"useCustomSignature",checked:t,onChange:()=>c(R(!t))})]}),e.jsxs("span",{children:[e.jsx("label",{htmlFor:"Signature",children:"Signature"}),t?e.jsx("textarea",{name:"customSignature",id:"customSignature",defaultValue:E}):e.jsx("textarea",{name:"signature",id:"signature",readOnly:!0,value:S})]})]})]}),e.jsx("h1",{children:"Update Your Password"}),e.jsxs("div",{className:n.profileInfo_form_updatePassword,children:[e.jsxs("div",{className:n.profileInfo_form_updatePassword_left,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentPassword",children:"Current Password"}),e.jsx("input",{type:"password",name:"currentPassword",id:"currentPassword",placeholder:"Enter current password"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",children:"New Password"}),e.jsx("input",{type:"password",name:"newPassword",id:"newPassword",placeholder:"Enter new password"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmNewPassword",children:"Confirm New Password"}),e.jsx("input",{type:"password",name:"confirmNewPassword",id:"confirmNewPassword",placeholder:"Confirm new password"})]})]}),e.jsx("div",{className:n.profileInfo_form_updatePassword_right,children:e.jsxs("fieldset",{children:[e.jsx("legend",{children:"Password Requirements"}),e.jsx("strong",{children:"Your password must contain:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"1 uppercase letter"}),e.jsx("li",{children:"1 lowercase letter"}),e.jsx("li",{children:"1 digit"}),e.jsx("li",{children:"8 characters minimum"}),e.jsx("li",{children:"24 characters maximum"})]}),e.jsx("strong",{children:"password can not contain:"}),e.jsx("ul",{children:e.jsx("li",{children:"your login name"})})]})})]})]})]})]})})]})};export{Q as default};

import{r as m,j as e,b as V,a as E,c as W,F as q,G as U,H as P,L as I,N as w,I as J}from"./index-SDeZWYlL.js";import{m as B}from"./MyProfile.module-Cdgpf7Z5.js";import{m as c}from"./BroadcastFilters.module-D28EjqF3.js";import{i as A,c as Q,t as H,m as $,s as z,g as K,r as L,a as D}from"./services-DfA8nfXM.js";import{c as S}from"./MyVendors.module-BQPwKHZR.js";const M=({items:p,selectedItems:x,handleCheckboxChange:b,title:O,name:l,toggleAllCheckboxes:a,disabled:j})=>(m.useEffect(()=>{console.log("CheckboxList re-rendered with selectedItems:",x)},[x]),e.jsxs("div",{children:[e.jsx("h3",{children:O}),e.jsx("ul",{children:p.map(g=>e.jsx("li",{children:e.jsxs("span",{children:[e.jsx("label",{htmlFor:g.id,children:g.label}),e.jsx("input",{type:"checkbox",name:l,value:g.value,checked:x.includes(g.value),onChange:()=>b(l,g.value),id:g.id,disabled:j})]})},g.id))}),e.jsxs("div",{className:c.checkBtn,children:[e.jsx("button",{type:"button",onClick:()=>a(l,p,!0),children:"Check All"}),e.jsx("button",{type:"button",onClick:()=>a(l,p,!1),children:"Uncheck All"})]})]})),_=({title:p,items:x,selectedItems:b=[],handleCheckboxChange:O,selectType:l,showCheckAll:a,dropdownOptions:j,selectedDropdownValue:g,handleDropdownChange:y,name:r,toggleAllCheckboxes:k,disabled:R})=>e.jsxs("div",{children:[e.jsx("h3",{children:p}),l==="checkbox"&&e.jsx("ul",{children:x.map(o=>e.jsx("li",{children:e.jsxs("span",{children:[e.jsx("label",{htmlFor:o.value||o,children:o.label||o}),e.jsx("input",{type:"checkbox",name:r,value:o.value||o,checked:b.includes(o.value||o),onChange:()=>O(r,o.value||o),id:o.value||o,disabled:R})]})},o.value||o))}),l==="dropdown"&&e.jsx("select",{name:"dropdown",id:"dropdown",value:g||"",onChange:o=>y(o.target.value),disabled:R,children:j.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))}),a&&e.jsxs("div",{className:c.checkBtn,children:[e.jsx("button",{type:"button",onClick:()=>k(r,x,!0),children:"Check All"}),e.jsx("button",{type:"button",onClick:()=>k(r,x,!1),children:"Uncheck All"})]})]}),X=({onIncludedMFGsChange:p})=>{const[x,b]=m.useState([...A]),[O,l]=m.useState(["-ALL MFG's-"]),[a,j]=m.useState([]),[g,y]=m.useState([]),r=(h,u)=>{const v=Array.from(u.target.selectedOptions,T=>T.value);h(v)},k=()=>{if(g.length>0){const h=O.filter(v=>!g.includes(v)),u=[...x,...g];l(h),b(u),y([]),p(h)}},R=()=>{if(a.length>0){const h=x.filter(v=>!a.includes(v)),u=[...O,...a];b(h),l(u),j([]),p(u)}},o=()=>{b(A),l(["-ALL MFG's-"]),j([]),y([])};return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("h1",{children:"Include These MFG's"}),e.jsxs("div",{className:c.mfgcontainer,children:[e.jsx("div",{children:e.jsx("select",{multiple:!0,className:c.listBox,value:g,onChange:h=>r(y,h),children:O.map((h,u)=>e.jsx("option",{children:h},u))})}),e.jsxs("div",{className:c.mfgbuttons,children:[e.jsx("p",{onClick:k,children:">>"}),e.jsx("p",{onClick:R,children:"<<"}),e.jsx("p",{onClick:o,children:"Reset"})]}),e.jsx("div",{children:e.jsx("select",{multiple:!0,className:c.listBox,value:a,onChange:h=>r(j,h),children:x.map((h,u)=>e.jsx("option",{children:h},u))})})]})]})})},Y=()=>{const p=V.get("token"),[x,b]=m.useState(""),[O,l]=m.useState(!1),[a,j]=m.useState([]),[g,y]=m.useState({}),[r,k]=m.useState(null),R=m.useRef(),o=m.useRef(),h=E(),{searchCompanyData:u}=W(s=>s.reports);function v(s,F){let f;return(...N)=>{clearTimeout(f),f=setTimeout(()=>s(...N),F)}}const T=()=>l(!0),C=v(s=>{s&&h(U({name:s,token:p}))},500),G=()=>{setTimeout(()=>l(!1),200)};m.useEffect(()=>{x?C(x):h(q())},[x,h,p]);const t=s=>{const F=s.target.value;b(F),l(!0)},n=s=>{k(s),b(s.name),l(!1)},i=()=>{r&&!a.some(s=>s.id===r.id)&&(j([...a,r]),k(null),b(""))},d=(s,F)=>{F==="remove"?(j(a.filter(f=>f.id!==s)),y(f=>{const N={...f};return delete N[s],N})):y(f=>({...f,[s]:F}))};return e.jsxs("div",{className:S.searchCompanyInventory,children:[e.jsx("div",{className:S.selectedCompanies,children:a.map(s=>e.jsxs("div",{className:S.selectedCompany,children:[e.jsx("span",{children:s.name}),e.jsxs("select",{onChange:F=>d(s.id,F.target.value),value:g[s.id]||"",children:[e.jsx("option",{value:"send",children:"Send"}),e.jsx("option",{value:"remove",children:"Remove"}),e.jsx("option",{value:"omit",children:"Omit"})]})]},s.id))}),e.jsxs("div",{children:[e.jsx("span",{children:e.jsx("label",{htmlFor:"company",children:"Company Search:"})}),e.jsx("br",{}),e.jsxs("span",{ref:R,children:[e.jsx("input",{type:"search",name:"company",id:"company",value:x,onChange:t,onFocus:T,onBlur:G}),e.jsx("span",{className:S.addBtn,onClick:i,style:{marginLeft:"10px"},children:"Add"}),e.jsx("div",{className:S.compnaySearch,ref:o,children:O&&e.jsx("ul",{children:(u==null?void 0:u.length)>0?u.map(s=>e.jsxs("li",{onClick:()=>n(s),className:S.companyItem,children:[e.jsx("p",{children:s.name}),s.region&&s.country&&e.jsxs("p",{children:[e.jsxs("span",{children:[s.region,","]}),e.jsx("span",{children:s.country})]})]},s.id)):e.jsx("li",{children:"No results found"},"no-results")})})]})]})]})},ce=()=>{const[p,x]=m.useState([]),b=t=>{x(t)},O=p.filter(t=>t!=="-ALL MFG's-"),[l,a]=m.useState({selectedCategories:[],selectedServices:[],selectedGroupings:[],selectedRegions:[],selectedOutgoingRegions:[],selectedCountry:[],selectedOutgoingCountry:[],selectedBroadcastTypes:[],dailyBroadcast:!1,broadcasts:!1,multicast:!1,servicecast:!1}),[j,g]=m.useState({computers:!0,telecom:!1,mobileDevice:!1}),y=t=>{g({computers:!1,telecom:!1,mobileDevice:!1,[t]:!0})},r=(t,n)=>{a(i=>{let d;return t==="selectedCategories"||t==="telecom"||t==="mobileDevice"?(d=i.selectedCategories.includes(n)?i.selectedCategories.filter(s=>s!==n):[...i.selectedCategories,n],{...i,selectedCategories:d}):t==="selectedServices"?(d=i.selectedServices.includes(n)?i.selectedServices.filter(s=>s!==n):[...i.selectedServices,n],{...i,selectedServices:d}):t==="selectedGroupings"?(d=i.selectedGroupings.includes(n)?i.selectedGroupings.filter(s=>s!==n):[...i.selectedGroupings,n],{...i,selectedGroupings:d}):t==="selectedRegions"?(d=i.selectedRegions.includes(n)?i.selectedRegions.filter(s=>s!==n):[...i.selectedRegions,n],{...i,selectedRegions:d}):t==="selectedOutgoingRegions"?(d=i.selectedOutgoingRegions.includes(n)?i.selectedOutgoingRegions.filter(s=>s!==n):[...i.selectedOutgoingRegions,n],{...i,selectedOutgoingRegions:d}):t==="type_of_broadcast"?(d=i.selectedBroadcastTypes.includes(n)?i.selectedBroadcastTypes.filter(s=>s!==n):[...i.selectedBroadcastTypes,n],{...i,selectedBroadcastTypes:d}):i})},k=t=>{a(n=>({...n,selectedCountry:[t]}))},R=t=>{a(n=>({...n,selectedOutgoingCountry:[t]}))},o=(t,n,i)=>{a(d=>{const s=n.map(N=>typeof N=="object"?N.value:N),F=d[t]||[];console.log("Current selection:",F),console.log("Items to toggle:",s);let f;return i?f=[...new Set([...F,...s])]:f=F.filter(N=>!s.includes(N)),console.log("Updated selection:",f),{...d,[t]:f}})},h=E(),u=V.get("token");m.useEffect(()=>{const t=JSON.parse(localStorage.getItem("broadcastFilters"));t&&a(n=>({...n,dailyBroadcast:t.daily_broadcast||!1,broadcasts:t.broadcasts||!1,multicast:t.multicast||!1,servicecast:t.servicecast||!1,selectedCategories:t.categories||[],selectedServices:t.services||[],selectedGroupings:t.groupings||[],selectedRegions:t.selectedRegions||[],selectedOutgoingRegions:t.selectedOutgoingRegions||[],selectedCountry:t.selectedCountry||[],selectedOutgoingCountry:t.selectedOutgoingCountry||[],selectedBroadcastTypes:t.type_of_broadcast||[]})),u&&h(P({token:u}))},[h,u]);const v=t=>{const{name:n,value:i}=t.target,d=i==="1";n==="daily_broadcast"?a(s=>({...s,dailyBroadcast:d})):n==="broadcasts"?a(s=>({...s,broadcasts:d})):n==="multicast"?a(s=>({...s,multicast:d})):n==="servicecast"&&a(s=>({...s,servicecast:d}))},T=t=>{if(t.preventDefault(),!C)return;const n=[...new Set([...l.selectedRegions,...l.selectedOutgoingRegions])],i=[...new Set([...l.selectedCountry,...l.selectedOutgoingCountry])],d={daily_broadcast:l.dailyBroadcast,broadcasts:l.broadcasts,type_of_broadcast:l.selectedBroadcastTypes,categories:l.selectedCategories,services:l.selectedServices,groupings:l.selectedGroupings,region:n,country:i,mfg:O};localStorage.setItem("broadcastFilters",JSON.stringify({...d,multicast:l.multicast,servicecast:l.servicecast,selectedRegions:l.selectedRegions,selectedOutgoingRegions:l.selectedOutgoingRegions,selectedCountry:l.selectedCountry,selectedOutgoingCountry:l.selectedOutgoingCountry})),h(J({data:d,token:u}))},C=l.selectedBroadcastTypes.length>0,G=()=>{a({selectedCategories:[],selectedServices:[],selectedGroupings:[],selectedRegions:[],selectedOutgoingRegions:[],selectedCountry:[],selectedOutgoingCountry:[],selectedBroadcastTypes:[],dailyBroadcast:!1,broadcasts:!1,multicast:!1,servicecast:!1}),x([]),alert("All fields have been reset!")};return e.jsx(e.Fragment,{children:e.jsx("div",{className:B.profileLayout,children:e.jsxs("form",{onSubmit:T,children:[e.jsxs("div",{className:B.profileBtn,children:[e.jsx("p",{children:"my profile"}),e.jsxs("span",{children:[e.jsx("input",{type:"submit",value:"submit changes",className:c.sumbitBtn}),e.jsx(I,{to:"/compinfo",children:e.jsx("button",{type:"button",children:"view profile"})})]})]}),e.jsxs("div",{className:B.profileInfo,children:[e.jsx("div",{className:B.profileInfo_links,children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(w,{to:"/myprofile",end:!0,className:({isActive:t})=>t?B.active:"",children:e.jsx("span",{children:"Personal Info"})})}),e.jsx("li",{children:e.jsx(w,{to:"/myprofile/Options",className:({isActive:t})=>t?B.active:"",children:e.jsx("span",{children:"Options"})})}),e.jsx("li",{children:e.jsx(w,{to:"/myprofile/MyVendors",className:({isActive:t})=>t?B.active:"",children:e.jsx("span",{children:"My Vendors"})})}),e.jsx("li",{children:e.jsx(w,{to:"/myprofile/MyContact",className:({isActive:t})=>t?B.active:"",children:e.jsx("span",{children:"My Contacts"})})}),e.jsxs("li",{children:[e.jsx(w,{to:"/myprofile/broadcastfilter",className:({isActive:t})=>t?B.active:"",children:e.jsx("span",{children:"Broadcast Filters"})}),"                "]})]})}),e.jsxs("div",{className:c.broadcastFilters,children:[e.jsx("h1",{children:"Standard Filters"}),e.jsxs("div",{className:c.broadcastFilters_emailSettings,children:[e.jsx("h1",{children:"Email Settings"}),e.jsxs("div",{className:c.broadcastFilters_emailSettings_row,children:[e.jsxs("div",{className:c.broadcastFilters_item,children:[e.jsx("label",{children:"Daily Broadcast Summary"}),e.jsxs("select",{name:"daily_broadcast",value:l.dailyBroadcast?"1":"0",onChange:v,children:[e.jsx("option",{value:"0",children:"Off"}),e.jsx("option",{value:"1",children:"On"})]})]}),e.jsxs("div",{className:c.broadcastFilters_item,children:[e.jsx("label",{children:"Broadcast"}),e.jsxs("select",{name:"broadcasts",value:l.broadcasts?"1":"0",onChange:v,children:[e.jsx("option",{value:"0",children:"Off"}),e.jsx("option",{value:"1",children:"On"})]})]}),e.jsxs("div",{className:c.broadcastFilters_item,children:[e.jsx("label",{children:"Multicast"}),e.jsxs("select",{name:"multicast",value:l.multicast?"1":"0",onChange:v,children:[e.jsx("option",{value:"0",children:"Off"}),e.jsx("option",{value:"1",children:"On"})]})]}),e.jsxs("div",{className:c.broadcastFilters_item,children:[e.jsx("label",{children:"Servicecast"}),e.jsxs("select",{name:"servicecast",value:l.servicecast?"1":"0",onChange:v,children:[e.jsx("option",{value:"0",children:"Off"}),e.jsx("option",{value:"1",children:"On"})]})]})]})]}),e.jsxs("div",{className:c.broadcastFilters_typeOfBroadcast,children:[e.jsx("h1",{children:"Receive The Following Type Of Broadcast"}),e.jsxs("div",{children:[e.jsxs("span",{children:[e.jsx("label",{htmlFor:"wtb",children:"Want To Buy (WTB)"}),e.jsx("input",{type:"checkbox",checked:l.selectedBroadcastTypes.includes("wtb"),onChange:()=>r("type_of_broadcast","wtb"),name:"selectedBroadcastTypes"})]}),e.jsxs("span",{children:[e.jsx("label",{htmlFor:"rfq",children:"Request For Quote (RFQ)"}),e.jsx("input",{type:"checkbox",checked:l.selectedBroadcastTypes.includes("rfq"),onChange:()=>r("type_of_broadcast","rfq"),name:"selectedBroadcastTypes"})]}),e.jsxs("span",{children:[e.jsx("label",{htmlFor:"wts",children:"Want To Sell (WTS)"}),e.jsx("input",{type:"checkbox",checked:l.selectedBroadcastTypes.includes("wts"),onChange:()=>r("type_of_broadcast","wts"),name:"selectedBroadcastTypes"})]})]})]}),e.jsx("div",{children:e.jsx(X,{onIncludedMFGsChange:b})}),e.jsxs("div",{className:c.broadcastFilters_categories,children:[e.jsx("h1",{children:"In The Following Categories"}),e.jsxs("div",{className:c.onlyReceiveMatch,children:[e.jsxs("div",{className:c.categoriesToggleButton,children:[e.jsx("button",{type:"button",onClick:()=>y("computers"),children:"Computers"}),e.jsx("button",{type:"button",onClick:()=>y("telecom"),children:"Telecom"}),e.jsx("button",{type:"button",onClick:()=>y("mobileDevice"),children:"Mobile Devices"})]}),j.computers&&e.jsx("div",{children:e.jsx("ul",{className:c.checkbox,children:e.jsx(M,{items:Q,selectedItems:l.selectedCategories,handleCheckboxChange:r,toggleAllCheckboxes:o,disabled:!C,title:"Computer Categories",name:"selectedCategories"})})}),j.telecom&&e.jsx("div",{children:e.jsx("ul",{className:c.checkbox,children:e.jsx(M,{items:H,selectedItems:l.selectedCategories,handleCheckboxChange:r,toggleAllCheckboxes:o,disabled:!C,title:"Telecom Categories",name:"selectedCategories"})})}),j.mobileDevice&&e.jsx("div",{children:e.jsx("ul",{className:c.checkbox,children:e.jsx(M,{items:$,selectedItems:l.selectedCategories,handleCheckboxChange:r,toggleAllCheckboxes:o,disabled:!C,title:"Mobile Device Categories",name:"selectedCategories"})})})]})]}),e.jsx("div",{className:c.broadcastFilters_services,children:e.jsx("ul",{className:c.checkbox,children:e.jsx(M,{items:z,selectedItems:l.selectedServices,handleCheckboxChange:r,toggleAllCheckboxes:o,disabled:!C,title:"For The Following Services",name:"selectedServices"})})}),e.jsx("div",{className:c.broadcastFilters_grouping,children:e.jsx("ul",{className:c.groupCheckbox,children:e.jsx(M,{items:K,selectedItems:l.selectedGroupings,handleCheckboxChange:r,toggleAllCheckboxes:o,disabled:!C,title:"With The Following Groupings",name:"selectedGroupings"})})}),e.jsxs("div",{className:c.broadcastFilters_AdvancedFilters,children:[e.jsx("h1",{children:"Advanced Filters"}),e.jsxs("div",{className:c.broadcastFilters_regionCountry,children:[e.jsx("ul",{className:c.groupCheckbox,children:e.jsx(_,{title:"From The Following Regions",items:L,selectedItems:l.selectedRegions,handleCheckboxChange:r,toggleAllCheckboxes:o,disabled:!C,selectType:"checkbox",showCheckAll:!0,name:"selectedRegions"})}),e.jsx("div",{style:{marginLeft:"15px",marginTop:"-24px",marginBottom:"20px"},children:e.jsx(_,{title:"Or Select a Country",dropdownOptions:D,selectedDropdownValue:l.selectedCountry,handleDropdownChange:k,disabled:!C,selectType:"dropdown",showCheckAll:!1})})]}),e.jsxs("div",{className:c.broadcastFilters_outgoing,children:[e.jsx("ul",{className:c.groupCheckbox,children:e.jsx(_,{title:"Default Outgoing Settings",items:L,selectedItems:l.selectedOutgoingRegions,handleCheckboxChange:r,toggleAllCheckboxes:o,disabled:!C,selectType:"checkbox",showCheckAll:!0,name:"selectedOutgoingRegions"})}),e.jsx("div",{style:{marginLeft:"15px",marginTop:"-24px",marginBottom:"20px"},children:e.jsx(_,{title:"Or Select a Country",dropdownOptions:D,selectedDropdownValue:l.selectedOutgoingCountry,handleDropdownChange:R,disabled:!C,selectType:"dropdown",showCheckAll:!1})})]}),e.jsxs("div",{className:c.broadcastFilters_outgoingVendor,children:[e.jsx("h1",{children:"Outgoing Vendor Filters"}),e.jsx("ul",{children:e.jsx("li",{children:e.jsxs("span",{children:[e.jsx("label",{htmlFor:"toMyVendorOnly",children:"To My Vendor Only"}),e.jsx("input",{type:"checkbox",id:"toMyVendorOnly",name:"toMyVendorOnly",value:"toMyVendorOnly"})]})})})]}),e.jsxs("div",{className:c.broadcastFilters_companyFilter,children:[e.jsx("h1",{children:"Company Filters (Max of 25/Overrides My Vendor settings.)"}),e.jsx("div",{className:c.section,style:{margin:"10px"},children:e.jsx("div",{className:c.display,children:e.jsx(Y,{})})})]})]}),e.jsx("div",{className:c.lastSec,children:e.jsxs("div",{children:[e.jsxs("p",{children:["Click On The  ",e.jsx(I,{to:"/myprofile/MyVendors",children:e.jsx("span",{children:"My Vendors  "})})," Link to manage or stop receiving Broadcasts from a vendor."]}),e.jsxs("p",{children:[e.jsx("span",{style:{color:"red"},children:"1"}),"Must be selected to receive Multicast (multiple part broadcast) emails that don't have a specific mfg."]}),e.jsxs("p",{children:[e.jsx("span",{style:{color:"red"},children:"2"}),"Must be selected to receive Servicecast (service related broadcast) emails."]})]})}),e.jsx("div",{className:c.btnGroup,children:e.jsxs("div",{className:c.btnGroupSec,children:[e.jsx("button",{onClick:G,children:"Reset"}),e.jsx("button",{onClick:T,children:"Submit Changes"})]})})]})]})]})})})};export{ce as default};
